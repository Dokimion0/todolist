{"ast":null,"code":"import _slicedToArray from\"C:/Users/lcy/Desktop/todolist/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useEffect,useState}from'react';import{AiOutlineBars,AiOutlinePlus}from'react-icons/ai';import{BiSort}from'react-icons/bi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Todo(_ref){var userObj=_ref.userObj;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),task=_useState4[0],setTask=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tasks=_useState6[0],setTasks=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),taskIndex=_useState8[0],setTaskIndex=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),text=_useState10[0],setText=_useState10[1];var _useState11=useState({x:0,y:0}),_useState12=_slicedToArray(_useState11,2),points=_useState12[0],setPoints=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),contextMenu=_useState14[0],setContextMenu=_useState14[1];var date=new Date();var month=date.getUTCMonth()+1;var day=date.getUTCDate();var week=['일','월','화','수','목','금','토'];var dayOfWeek=week[new Date('2016-07-28').getDay()];var getTasks=function getTasks(){axios.get('api/tasks').then(function(res){setTasks(res.data);}).catch(function(err){console.log(err);});};useEffect(function(){getTasks();},[]);var toggleEdit=function toggleEdit(){setEditing(true);};var onSubmit=function onSubmit(e){e.preventDefault();var taskObj={text:task,createdAt:Date.now(),email:userObj.email};axios.post('/api/task',taskObj);setTask('');};var onChange=function onChange(e){var value=e.target.value;setTask(value);};var onDeleteClick=function onDeleteClick(text){console.log(text);var ok=window.confirm('삭제하시겠습니까?');if(ok){axios.delete('/api/task',{data:{text:text}});}setContextMenu(false);};var _onContextMenu=function onContextMenu(e,i,text){e.preventDefault();setContextMenu(true);setTaskIndex(i);setText(text);setPoints({x:e.pageX,y:e.pageY});console.log(taskIndex,text,i);};var onClickTask=function onClickTask(e,text,i){e.preventDefault();setTaskIndex(i);console.log(text,i);setContextMenu(false);console.log('??');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"taskToolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"taskToolbar-title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"taskToolbar-item\",children:/*#__PURE__*/_jsx(AiOutlineBars,{size:\"18\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"taskToolbar-item\",style:{flexBasis:400},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC624\\uB298 \\uD560 \\uC77C\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"taskToolbar-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"action\",children:/*#__PURE__*/_jsx(BiSort,{size:\"18\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"subline\",children:/*#__PURE__*/_jsxs(\"span\",{children:[month,\"\\uC6D4 \",day,\"\\uC77C \",dayOfWeek,\"\\uC694\\uC77C\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"taskContents\",children:[!editing&&/*#__PURE__*/_jsx(\"div\",{className:\"taskContent-btn\",children:/*#__PURE__*/_jsxs(\"span\",{onClick:toggleEdit,children:[/*#__PURE__*/_jsx(AiOutlinePlus,{color:\"#0078d7\"}),\"Add task\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"viewContent\",children:editing&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"editor\",children:/*#__PURE__*/_jsx(\"div\",{className:\"editorInput\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Add task\",value:task,onChange:onChange,type:\"text\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"editorBtn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"sumbit\",onClick:toggleEdit,children:\"\\uCD94\\uAC00\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"taskItems\",children:tasks.map(function(task,i){return/*#__PURE__*/_jsx(\"div\",{className:'taskItem editor'+(i===taskIndex?' active':''),onContextMenu:function onContextMenu(e){return _onContextMenu(e,i,task.text);},onClick:function onClick(e){return onClickTask(e,task.text,i);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"taskItem-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:task.text}),/*#__PURE__*/_jsx(\"div\",{className:\"metaDataInfo\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC791\\uC5C5\"})}),contextMenu&&/*#__PURE__*/_jsx(\"div\",{className:\"contextMenu\",style:{top:points.y,left:points.x},value:i,children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"contextMenu-list\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC218\\uC815\"})})}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onDeleteClick(text);},children:/*#__PURE__*/_jsx(\"div\",{className:\"contextMenu-list\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC0AD\\uC81C test2\"})})})]})})]})},i);})})]})]});}export default Todo;","map":{"version":3,"names":["axios","useEffect","useState","AiOutlineBars","AiOutlinePlus","BiSort","Todo","userObj","editing","setEditing","task","setTask","tasks","setTasks","taskIndex","setTaskIndex","text","setText","x","y","points","setPoints","contextMenu","setContextMenu","date","Date","month","getUTCMonth","day","getUTCDate","week","dayOfWeek","getDay","getTasks","get","then","res","data","catch","err","console","log","toggleEdit","onSubmit","e","preventDefault","taskObj","createdAt","now","email","post","onChange","value","target","onDeleteClick","ok","window","confirm","delete","onContextMenu","i","pageX","pageY","onClickTask","flexBasis","map","top","left"],"sources":["C:/Users/lcy/Desktop/todolist/client/src/routes/Todo.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { AiOutlineBars, AiOutlinePlus } from 'react-icons/ai';\r\nimport { BiSort } from 'react-icons/bi';\r\n\r\nfunction Todo({ userObj }) {\r\n  const [editing, setEditing] = useState(false);\r\n  const [task, setTask] = useState('');\r\n  const [tasks, setTasks] = useState([]);\r\n  const [taskIndex, setTaskIndex] = useState('');\r\n  const [text, setText] = useState('');\r\n\r\n  const [points, setPoints] = useState({ x: 0, y: 0 });\r\n  const [contextMenu, setContextMenu] = useState(false);\r\n\r\n  const date = new Date();\r\n  const month = date.getUTCMonth() + 1;\r\n  const day = date.getUTCDate();\r\n  const week = ['일', '월', '화', '수', '목', '금', '토'];\r\n  const dayOfWeek = week[new Date('2016-07-28').getDay()];\r\n\r\n  const getTasks = () => {\r\n    axios\r\n      .get('api/tasks')\r\n      .then((res) => {\r\n        setTasks(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTasks();\r\n  }, []);\r\n\r\n  const toggleEdit = () => {\r\n    setEditing(true);\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const taskObj = {\r\n      text: task,\r\n      createdAt: Date.now(),\r\n      email: userObj.email,\r\n    };\r\n    axios.post('/api/task', taskObj);\r\n    setTask('');\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { value } = e.target;\r\n    setTask(value);\r\n  };\r\n\r\n  const onDeleteClick = (text) => {\r\n    console.log(text);\r\n    const ok = window.confirm('삭제하시겠습니까?');\r\n    if (ok) {\r\n      axios.delete('/api/task', { data: { text } });\r\n    }\r\n    setContextMenu(false);\r\n  };\r\n\r\n  const onContextMenu = (e, i, text) => {\r\n    e.preventDefault();\r\n    setContextMenu(true);\r\n    setTaskIndex(i);\r\n    setText(text);\r\n    setPoints({ x: e.pageX, y: e.pageY });\r\n    console.log(taskIndex, text, i);\r\n  };\r\n\r\n  const onClickTask = (e, text, i) => {\r\n    e.preventDefault();\r\n    setTaskIndex(i);\r\n    console.log(text, i);\r\n    setContextMenu(false);\r\n    console.log('??');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"taskToolbar\">\r\n        <div className=\"taskToolbar-title\">\r\n          <div className=\"taskToolbar-item\">\r\n            <AiOutlineBars size=\"18\" />\r\n          </div>\r\n          <div className=\"taskToolbar-item\" style={{ flexBasis: 400 }}>\r\n            <h2>오늘 할 일</h2>\r\n          </div>\r\n          <div className=\"taskToolbar-item\">\r\n            <div className=\"action\">\r\n              <BiSort size=\"18\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"subline\">\r\n          <span>\r\n            {month}월 {day}일 {dayOfWeek}요일\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"taskContents\">\r\n        {!editing && (\r\n          <div className=\"taskContent-btn\">\r\n            <span onClick={toggleEdit}>\r\n              <AiOutlinePlus color=\"#0078d7\" />\r\n              Add task\r\n            </span>\r\n          </div>\r\n        )}\r\n        <div className=\"viewContent\">\r\n          {editing && (\r\n            <form onSubmit={onSubmit}>\r\n              <div className=\"editor\">\r\n                <div className=\"editorInput\">\r\n                  <input\r\n                    placeholder=\"Add task\"\r\n                    value={task}\r\n                    onChange={onChange}\r\n                    type=\"text\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"editorBtn\">\r\n                <button type=\"sumbit\" onClick={toggleEdit}>\r\n                  추가\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n        <div className=\"taskItems\">\r\n          {tasks.map((task, i) => (\r\n            <div\r\n              className={'taskItem editor' + (i === taskIndex ? ' active' : '')}\r\n              key={i}\r\n              onContextMenu={(e) => onContextMenu(e, i, task.text)}\r\n              onClick={(e) => onClickTask(e, task.text, i)}\r\n            >\r\n              <div className=\"taskItem-title\">\r\n                <span>{task.text}</span>\r\n                <div className=\"metaDataInfo\">\r\n                  <span>작업</span>\r\n                </div>\r\n\r\n                {contextMenu && (\r\n                  <div\r\n                    className=\"contextMenu\"\r\n                    style={{ top: points.y, left: points.x }}\r\n                    value={i}\r\n                  >\r\n                    <ul>\r\n                      <li>\r\n                        <div className=\"contextMenu-list\">\r\n                          <span>수정</span>\r\n                        </div>\r\n                      </li>\r\n                      <li onClick={() => onDeleteClick(text)}>\r\n                        <div className=\"contextMenu-list\">\r\n                          <span>삭제 test2</span>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Todo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}